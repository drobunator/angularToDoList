<app-modal-confirm *ngIf="modalConfirmActive" (onModalConfirmValue)="modalConfirmValue($event)"></app-modal-confirm>
<app-modal-alert *ngIf="modalAlertClose" (onCloseAlert)="modalAlertClose = $event"></app-modal-alert>
<app-header (addNewTask)="pushTask($event)"
            (emptyAddTaskInput)="modalAlertClose = $event"
            (onSearchInput)="searchInputValue = $event"
>
</app-header>
<app-buttons-block
  (onSortBtn)="sortValue = $event.value; sortKey = $event.key"
></app-buttons-block>

<div class="task-container">
  <ul class="task-container__list">
    <div *ngIf="loading; else completeLoading">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>
    <ng-template #completeLoading>
      <div *ngIf="!tasks.length">
        <li class="task-container_empty">{{emptyTitle | titlecase}}</li>
      </div>
    </ng-template>

    <app-task
      *ngFor="let task of tasks | searchPipe: searchInputValue | sort: [sortValue, sortKey]; let index = index "
      [index]="index"
      [task]="task"
      (onRemoveTask)="deleteTask($event)"
      (onEditTask)="editTask($event)"
      (onChangeImportantTask)='changeImportantTask($event)'
      (onCheckboxChecked)='checkboxTaskChecked($event)'
    ></app-task>

  </ul>

</div>
